# drgns
Test game for Gamebuino

The entry point is `drgns.ino`. This doesn't do much except call the update and draw functions from other files.

`img/` has the transcoded images in code format. These are generated by passing the appropriate PNG files through https://gamebuino.com/creations/image-transcoder. Not all the source PNG files have been checked in - only the dragon and the flame images have. The dragon and monster images must be generated as 4-bit paletted images, not the default 16-bit colour images, because they use palette swapping. The palette in `palette.png` should be used, not the default Gamebuino palette, since it has the correct transparency colour. The flame, for now, must be a 16-bit colour image because its colour doesn't exist in the current palette.

`src/` has the main program logic. In typical Gamebuino fashion, it is organised as a set of header files only. `#pragma once` and careful ordering of the functions in the files is sufficient to prevent problems for now without requiring proper header/sources files and linking.

`src/common.h` has basic game constants.

`src/collide.h` has a simple collision test function.

`src/lights.h` has globals that control the LEDs on the side of the Gamebuino, along with an update method to update the LEDs. Unlike a regular display, the LEDs are not cleared before being re-written, as that just forces the LEDs off - they should only ever be updated with new values, not cleared and then updated. `src/lights.h` handles all this; other parts of the code should only be setting the globals that tell `src/lights.h` what is available to be displayed.

`src/dragon.h` contains the `Player` type. Sorry. It handles player movement and display, and the breath weapon update and display. It also handles collisions with the breath weapon.

`src/monsters.h` contains the monster update and drawing code. There are no waves or patterns yet, the monsters cannot move or otherwise attack, and the monsters cannot hurt the player. There is a sinlge monster initialised in `drgns.ino`; this is a temporary situation while testing, monsters will not be initialised here in the future.
